# Merge Suggestions â€” Dashboard Ğ´Ğ»Ñ ÑĞ»Ğ¸ÑĞ½Ğ¸Ñ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ² ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹

> **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Draft
> **Ğ”Ğ°Ñ‚Ğ°:** 2026-01-26

---

## ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°

ĞŸÑ€Ğ¸ race condition Ğ² ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ entity Ğ¸Ğ· Telegram ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿Ğ¾ÑĞ²Ğ»ÑÑ‚ÑŒÑÑ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ñ‹:
- Entity Ñ Ğ¸Ğ¼ĞµĞ½ĞµĞ¼ "Telegram 12345" Ğ±ĞµĞ· identifier
- Entity Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¸Ğ¼ĞµĞ½ĞµĞ¼ Ğ¸ telegram_user_id identifier

ĞÑƒĞ¶ĞµĞ½ UI Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ğ¸ ÑĞ»Ğ¸ÑĞ½Ğ¸Ñ Ñ‚Ğ°ĞºĞ¸Ñ… Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ².

---

## ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ğ¸

1. **ĞÑĞ¸Ñ€Ğ¾Ñ‚ĞµĞ²ÑˆĞ¸Ğµ entity** â€” Ğ¸Ğ¼Ñ "Telegram XXXXX" Ğ±ĞµĞ· identifier (MVP)
2. **ĞĞ±Ñ‰Ğ¸Ğµ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹** â€” Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ entity Ñ Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ğ¼ phone/email
3. **ĞŸĞ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ Ğ¸Ğ¼ĞµĞ½Ğ°** â€” fuzzy matching (Ğ½Ğ¸Ğ·ĞºĞ¸Ğ¹ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚, Ğ¼Ğ½Ğ¾Ğ³Ğ¾ false positives)

---

## Data Model

### ĞĞ¾Ğ²Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `dismissed_merge_suggestions`

```sql
CREATE TABLE dismissed_merge_suggestions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  primary_entity_id UUID NOT NULL REFERENCES entities(id) ON DELETE CASCADE,
  dismissed_entity_id UUID NOT NULL REFERENCES entities(id) ON DELETE CASCADE,
  dismissed_at TIMESTAMP DEFAULT NOW(),
  dismissed_by VARCHAR(50) DEFAULT 'user',

  UNIQUE(primary_entity_id, dismissed_entity_id)
);

CREATE INDEX idx_dismissed_merge_primary ON dismissed_merge_suggestions(primary_entity_id);
```

### ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ğ¸ Ğ¾ÑĞ¸Ñ€Ğ¾Ñ‚ĞµĞ²ÑˆĞ¸Ñ… entity

```sql
-- ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ğ¼ entity Ñ Ğ¸Ğ¼ĞµĞ½ĞµĞ¼ "Telegram XXXXX" Ğ±ĞµĞ· telegram_user_id identifier
SELECT e.id, e.name,
       SUBSTRING(e.name FROM 'Telegram (\d+)') as extracted_user_id
FROM entities e
LEFT JOIN entity_identifiers ei ON ei.entity_id = e.id
  AND ei.identifier_type = 'telegram_user_id'
WHERE e.name ~ '^Telegram \d+$'
  AND ei.id IS NULL;
```

Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ `extracted_user_id` Ğ¸Ñ‰ĞµĞ¼ entity Ñ Ñ‚Ğ°ĞºĞ¸Ğ¼ identifier â€” ÑÑ‚Ğ¾ "Ğ³Ğ»Ğ°Ğ²Ğ½Ğ°Ñ" ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑŒ.

---

## Backend API

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```typescript
interface MergeSuggestionGroup {
  primaryEntity: {
    id: string;
    name: string;
    type: EntityType;
    profilePhoto?: string;
    identifiers: EntityIdentifier[];
  };
  candidates: Array<{
    id: string;
    name: string;           // "Telegram 12345"
    extractedUserId: string; // "12345"
    createdAt: Date;
    messageCount: number;   // ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ¾
  }>;
  reason: 'orphaned_telegram_id' | 'shared_identifier' | 'similar_name';
}

// Preview Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ ÑĞ»Ğ¸ÑĞ½Ğ¸Ñ
interface MergePreview {
  source: EntityMergeData;      // ĞšĞ°Ğ½Ğ´Ğ¸Ğ´Ğ°Ñ‚ (Ğ±ÑƒĞ´ĞµÑ‚ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½)
  target: EntityMergeData;      // Primary (Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)
  conflicts: MergeConflict[];   // ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚ÑƒÑÑ‰Ğ¸Ğµ Ğ¿Ğ¾Ğ»Ñ
}

interface EntityMergeData {
  id: string;
  name: string;
  type: EntityType;
  identifiers: EntityIdentifier[];
  facts: EntityFact[];
  messageCount: number;
  relationsCount: number;
}

interface MergeConflict {
  field: 'identifier' | 'fact';
  type: string;                  // 'phone', 'position', etc.
  sourceValue: string;
  targetValue: string;
}

// Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° ÑĞ»Ğ¸ÑĞ½Ğ¸Ğµ Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¹
interface MergeRequest {
  sourceId: string;              // ĞšĞ°Ğ½Ğ´Ğ¸Ğ´Ğ°Ñ‚ (Ğ±ÑƒĞ´ĞµÑ‚ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½)
  targetId: string;              // Primary (Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)
  includeIdentifiers: string[];  // ID identifiers Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ°
  includeFacts: string[];        // ID facts Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ°
  conflictResolutions: Array<{
    field: 'identifier' | 'fact';
    type: string;
    resolution: 'keep_target' | 'keep_source' | 'keep_both';
  }>;
}
```

### Endpoints

| Method | Path | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|------|----------|
| GET | `/api/entities/merge-suggestions` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ³Ñ€ÑƒĞ¿Ğ¿ Ğ´Ğ»Ñ ÑĞ»Ğ¸ÑĞ½Ğ¸Ñ |
| GET | `/api/entities/:sourceId/merge-preview/:targetId` | Preview Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ² |
| POST | `/api/entities/merge` | Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ ÑĞ»Ğ¸ÑĞ½Ğ¸Ğµ Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¹ |
| POST | `/api/entities/merge-suggestions/:primaryId/dismiss/:candidateId` | ĞÑ‚ĞºĞ»Ğ¾Ğ½Ğ¸Ñ‚ÑŒ ĞºĞ°Ğº Ğ½Ğµ-Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚ |

---

## Frontend UI

### Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° `/entities/merge-requests`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ½Ğ° ÑĞ»Ğ¸ÑĞ½Ğ¸Ğµ                              (3 Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸) â”‚
â”‚                                    [+ ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¤ Ğ“Ğ¾Ñ€ÑˆĞºĞ¾Ğ²Ğ° Ğ¢Ğ°Ñ‚ÑŒÑĞ½Ğ° Ğ®Ñ€ÑŒĞµĞ²Ğ½Ğ°                         â”‚   â”‚
â”‚  â”‚    telegram: @gorshkova â€¢ +7 999 123-45-67          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚    Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ñ‹:                             â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚    â”‚ Telegram 7839291724                       â”‚   â”‚   â”‚
â”‚  â”‚    â”‚ 12 ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ â€¢ ÑĞ¾Ğ·Ğ´Ğ°Ğ½ 25.01.2026          â”‚   â”‚   â”‚
â”‚  â”‚    â”‚                     [Ğ¡Ğ»Ğ¸Ñ‚ÑŒ] [ĞĞµ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚] â”‚   â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ¼ĞµÑ€Ğ¶ â€” Ğ´Ğ²Ğ° Ğ²Ñ…Ğ¾Ğ´Ğ°

#### 1. Ğ¡Ğ¾ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ entity (`/entities/:id`)

ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ñ..." Ğ² header Ğ¸Ğ»Ğ¸ dropdown menu:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Ğ˜Ğ²Ğ°Ğ½ ĞŸĞµÑ‚Ñ€Ğ¾Ğ²                          [â‹®] â”€â”            â”‚
â”‚                                               â”‚            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚            â”‚
â”‚     â”‚ âœï¸ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ        â”‚               â”‚            â”‚
â”‚     â”‚ ğŸ”— ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ñ...      â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚     â”‚ ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ              â”‚                            â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ â†’ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ¿Ğ¾Ğ¸ÑĞºĞ° target entity.

#### 2. Ğ¡Ğ¾ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ merge-requests

ĞšĞ½Ğ¾Ğ¿ĞºĞ° "+ ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ" â†’ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¾Ğ±ĞµĞ¸Ñ… entities.

### Ğ”Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¿Ğ¾Ğ»ĞµĞ¹ (MergePreviewDialog)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹                               [âœ•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Ğ£Ğ”ĞĞ›Ğ˜Ğ¢Ğ¬             â”‚    â”‚  ĞĞ¡Ğ¢ĞĞ’Ğ˜Ğ¢Ğ¬            â”‚      â”‚
â”‚  â”‚  Telegram 7839291724 â”‚ â”€â–º â”‚  Ğ“Ğ¾Ñ€ÑˆĞºĞ¾Ğ²Ğ° Ğ¢.Ğ®.       â”‚      â”‚
â”‚  â”‚  12 ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹        â”‚    â”‚  45 ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚  Ğ˜Ğ”Ğ•ĞĞ¢Ğ˜Ğ¤Ğ˜ĞšĞĞ¢ĞĞ Ğ«                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜‘ï¸ telegram_user_id: 7839291724        (Ğ¿ĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Ğ¤ĞĞšĞ¢Ğ«                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜‘ï¸ position: "Ğ—Ğ°Ğ²ÑƒÑ‡"                   (Ğ¿ĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸)  â”‚   â”‚
â”‚  â”‚ â˜ company: "Ğ¨ĞºĞ¾Ğ»Ğ° â„–5"                  (Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ ĞšĞĞĞ¤Ğ›Ğ˜ĞšĞ¢Ğ« (Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ phone:                                              â”‚   â”‚
â”‚  â”‚   â—‹ ĞÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ: +7 999 123-45-67 (Ñƒ Ğ“Ğ¾Ñ€ÑˆĞºĞ¾Ğ²Ğ¾Ğ¹)       â”‚   â”‚
â”‚  â”‚   â—‹ Ğ—Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ: +7 888 765-43-21 (Ñƒ Telegram...)     â”‚   â”‚
â”‚  â”‚   â— Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ğ°                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Ğ”ĞĞĞĞ«Ğ• (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)                                     â”‚
â”‚  â€¢ 12 ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ¿ĞµÑ€ĞµĞ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ñ‹                        â”‚
â”‚  â€¢ 2 ÑĞ²ÑĞ·Ğ¸ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ¿ĞµÑ€ĞµĞ½ĞµÑĞµĞ½Ñ‹                                â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [ĞÑ‚Ğ¼ĞµĞ½Ğ°]  [ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sidebar

Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿ÑƒĞ½ĞºÑ‚ "Ğ¡Ğ»Ğ¸ÑĞ½Ğ¸Ğµ" Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ» "Ğ¡ÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸" Ñ badge (ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ pending suggestions).

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

- `MergeSuggestionsPage.vue` â€” ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ suggestions
- `MergeSuggestionCard.vue` â€” ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ (primary entity + candidates)
- `MergeCandidateItem.vue` â€” ÑÑ‚Ñ€Ğ¾ĞºĞ° ĞºĞ°Ğ½Ğ´Ğ¸Ğ´Ğ°Ñ‚Ğ° Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸
- `MergePreviewDialog.vue` â€” Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ preview Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¹
- `MergeConflictResolver.vue` â€” ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²
- `EntitySearchDialog.vue` â€” Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ¿Ğ¾Ğ¸ÑĞºĞ° entity (Ğ´Ğ»Ñ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑ€Ğ¶Ğ°)
- `useMergeSuggestions.ts` â€” composable Ğ´Ğ»Ñ API
- `useMergePreview.ts` â€” composable Ğ´Ğ»Ñ preview Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ merge

---

## Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° ÑĞ»Ğ¸ÑĞ½Ğ¸Ñ

### Flow ÑĞ»Ğ¸ÑĞ½Ğ¸Ñ (Ñ preview)

```
[Ğ¡Ğ»Ğ¸Ñ‚ÑŒ] Ğ¸Ğ»Ğ¸ [ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ñ...]
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /merge-preview      â”‚  â—„â”€â”€ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾Ğ±ĞµĞ¸Ñ… entities
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MergePreviewDialog      â”‚  â—„â”€â”€ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ»Ñ
â”‚ - Ñ‡ĞµĞºĞ±Ğ¾ĞºÑÑ‹ identifiers  â”‚
â”‚ - Ñ‡ĞµĞºĞ±Ğ¾ĞºÑÑ‹ facts        â”‚
â”‚ - Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ² â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /entities/merge    â”‚  â—„â”€â”€ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ñ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾Ğ»ÑĞ¼Ğ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â–¼
      [Toast: Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾]
```

### ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ "Ğ¡Ğ»Ğ¸Ñ‚ÑŒ" / "ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ñ..."

1. `GET /api/entities/:sourceId/merge-preview/:targetId`
   - Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ identifiers, facts, messageCount, relationsCount Ğ´Ğ»Ñ Ğ¾Ğ±ĞµĞ¸Ñ… entities
   - Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹ (Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ¿Ğ¾Ğ»ĞµĞ¹ Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ÑĞ¼Ğ¸)

2. ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ `MergePreviewDialog`:
   - ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ source (Ğ±ÑƒĞ´ĞµÑ‚ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½) Ğ¸ target (Ğ¾ÑÑ‚Ğ°Ğ½ĞµÑ‚ÑÑ)
   - Ğ§ĞµĞºĞ±Ğ¾ĞºÑÑ‹ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ identifier/fact source
   - Ğ¡ĞµĞºÑ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ² Ñ radio-buttons

3. `POST /api/entities/merge` Ñ `MergeRequest`:
   ```typescript
   {
     sourceId: "uuid-source",
     targetId: "uuid-target",
     includeIdentifiers: ["id1", "id2"],
     includeFacts: ["fact1"],
     conflictResolutions: [
       { field: "identifier", type: "phone", resolution: "keep_both" }
     ]
   }
   ```

4. Backend Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚:
   - ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ¸Ñ‚ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ `entity_identifiers` source â†’ target
   - ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ¸Ñ‚ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ `entity_facts` source â†’ target
   - ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ `messages.sender_entity_id` source â†’ target (Ğ²ÑĞµĞ³Ğ´Ğ°)
   - ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ¸Ñ‚ `entity_relations` source â†’ target (Ğ²ÑĞµĞ³Ğ´Ğ°)
   - ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ conflict resolutions
   - Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ source entity

5. UI: Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³, Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ toast "Ğ¡ÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ñ‹"

### Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²

| Resolution | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
|------------|----------|
| `keep_target` | ĞÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ñƒ target, Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ¸Ñ‚ÑŒ source |
| `keep_source` | Ğ—Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ target Ğ½Ğ° source |
| `keep_both` | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ source ĞºĞ°Ğº Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ "keep_both" Ğ´Ğ»Ñ phone:**
- Target: +7 999 123-45-67
- Source: +7 888 765-43-21
- Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: Ñƒ target Ğ±ÑƒĞ´ÑƒÑ‚ Ğ¾Ğ±Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°

### ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ "ĞĞµ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚"

1. `POST /api/entities/merge-suggestions/:primaryId/dismiss/:candidateId`
2. Backend: ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² `dismissed_merge_suggestions`
3. UI: ÑƒĞ±Ğ¸Ñ€Ğ°ĞµÑ‚ ĞºĞ°Ğ½Ğ´Ğ¸Ğ´Ğ°Ñ‚Ğ° Ğ¸Ğ· ÑĞ¿Ğ¸ÑĞºĞ°

### ĞŸÑƒÑÑ‚Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ

"ĞĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ½Ğ° ÑĞ»Ğ¸ÑĞ½Ğ¸Ğµ âœ“"

---

## Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ´Ğ»Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### Backend (pkg-core)

```
apps/pkg-core/src/modules/entity/merge-suggestion/
â”œâ”€â”€ merge-suggestion.module.ts
â”œâ”€â”€ merge-suggestion.service.ts
â”œâ”€â”€ merge-suggestion.controller.ts
â””â”€â”€ dto/
    â”œâ”€â”€ merge-suggestion.dto.ts
    â”œâ”€â”€ merge-preview.dto.ts
    â””â”€â”€ merge-request.dto.ts

apps/pkg-core/src/modules/entity/entity.service.ts
â””â”€â”€ + mergeWithOptions(request: MergeRequest)  # Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ merge()

apps/pkg-core/src/database/migrations/
â””â”€â”€ XXXXXX-CreateDismissedMergeSuggestions.ts

packages/entities/src/
â””â”€â”€ dismissed-merge-suggestion.entity.ts
```

### Frontend (dashboard)

```
apps/dashboard/
â”œâ”€â”€ pages/entities/merge-requests.vue
â”œâ”€â”€ pages/entities/[id].vue                    # + ĞºĞ½Ğ¾Ğ¿ĞºĞ° "ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ñ..."
â”œâ”€â”€ components/entity/
â”‚   â”œâ”€â”€ MergeSuggestionCard.vue
â”‚   â”œâ”€â”€ MergeCandidateItem.vue
â”‚   â”œâ”€â”€ MergePreviewDialog.vue                 # NEW: Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¿Ğ¾Ğ»ĞµĞ¹
â”‚   â”œâ”€â”€ MergeConflictResolver.vue              # NEW: Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²
â”‚   â””â”€â”€ EntitySearchDialog.vue                 # NEW: Ğ¿Ğ¾Ğ¸ÑĞº entity Ğ´Ğ»Ñ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑ€Ğ¶Ğ°
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useMergeSuggestions.ts
â”‚   â””â”€â”€ useMergePreview.ts                     # NEW: preview + execute merge
â””â”€â”€ layouts/default.vue                        # sidebar badge
```

---

## ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### Ğ­Ñ‚Ğ°Ğ¿ 1: Backend Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹
1. Migration + Entity Ğ´Ğ»Ñ `dismissed_merge_suggestions`
2. `MergeSuggestionService` â€” Ğ´ĞµÑ‚ĞµĞºÑ†Ğ¸Ñ orphaned entities + dismiss
3. `MergeSuggestionController` â€” GET suggestions, POST dismiss

### Ğ­Ñ‚Ğ°Ğ¿ 2: Backend merge Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¹
4. DTO: `MergePreviewDto`, `MergeRequestDto`
5. `EntityService.getMergePreview()` â€” preview Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… + ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹
6. `EntityService.mergeWithOptions()` â€” merge Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»ĞµĞ¹
7. Endpoints: GET preview, POST merge

### Ğ­Ñ‚Ğ°Ğ¿ 3: Frontend suggestions page
8. `useMergeSuggestions.ts` â€” composable Ğ´Ğ»Ñ suggestions API
9. `MergeSuggestionsPage.vue` â€” ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
10. `MergeSuggestionCard.vue` + `MergeCandidateItem.vue`
11. Sidebar badge

### Ğ­Ñ‚Ğ°Ğ¿ 4: Frontend merge dialog
12. `useMergePreview.ts` â€” composable Ğ´Ğ»Ñ preview/merge
13. `MergePreviewDialog.vue` â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³
14. `MergeConflictResolver.vue` â€” ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²

### Ğ­Ñ‚Ğ°Ğ¿ 5: Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ¼ĞµÑ€Ğ¶
15. `EntitySearchDialog.vue` â€” Ğ¿Ğ¾Ğ¸ÑĞº entity
16. Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ entity (`[id].vue`)
17. ĞšĞ½Ğ¾Ğ¿ĞºĞ° "+ ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ" Ğ½Ğ° merge-requests

---

## Ğ‘ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ

- [ ] Ğ”ĞµÑ‚ĞµĞºÑ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¾Ğ±Ñ‰Ğ¸Ğ¼ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼ (phone, email)
- [ ] Fuzzy matching Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ°Ğ¼
- [ ] ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ entity (realtime)
- [ ] Bulk merge (ÑĞ»Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑÑ€Ğ°Ğ·Ñƒ)
