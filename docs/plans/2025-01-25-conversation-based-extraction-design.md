# Conversation-Based Extraction โ Design Document

> **ะกัะฐััั:** ๐ ะ ัะฐะทัะฐะฑะพัะบะต (brainstorm)
> **ะะฐัะฐ:** 2025-01-25
> **ะัะพะฑะปะตะผะฐ:** ะคะฐะบัั ะธะทะฒะปะตะบะฐัััั ะธะท ะพะดะธะฝะพัะฝัั ัะพะพะฑัะตะฝะธะน ะฑะตะท ะบะพะฝัะตะบััะฐ ะฑะตัะตะดั

---

## ะัะพะฑะปะตะผะฐ

ะขะตะบััะฐั ัะตะฐะปะธะทะฐัะธั ะธะทะฒะปะตะบะฐะตั ัะฐะบัั **ะฟะพ ะพะดะฝะพะผั ัะพะพะฑัะตะฝะธั**, ััะพ ะฟัะธะฒะพะดะธั ะบ:
- ะะตััะผััะปะตะฝะฝัะผ ัะฐะบัะฐะผ: `phone: "ะตัะปะธ ะตััั ะฝะพะผะตั ัะตะป"` ะฒะผะตััะพ ัะตะฐะปัะฝะพะณะพ ะฝะพะผะตัะฐ
- ะะพัะตัะต ะบะพะฝัะตะบััะฐ: "ะะบ, ัะดะตะปะฐั" ะฑะตะท ะฟะพะฝะธะผะฐะฝะธั ะงะขะ ะธะผะตะฝะฝะพ
- ะะตะฒะพะทะผะพะถะฝะพััะธ ัะฒัะทะฐัั ะพัะฒะตั ั ะฒะพะฟัะพัะพะผ ะธะท ะฟัะตะดัะดััะตะณะพ ัะพะพะฑัะตะฝะธั

**ะัะธะผะตั ะฟัะพะฑะปะตะผั:**
```
[14:00] ะะฐะบะฐะทัะธะบ: "ะะฐะบะพะน ั ัะตะฑั ะฝะพะผะตั ัะตะปะตัะพะฝะฐ, ะตัะปะธ ะตััั?"
[14:01] ะกะฐัะฐ: "+7 999 123-45-67"
```

ะัะธ ะพะฑัะฐะฑะพัะบะต ะฟะพ ะพะดะฝะพะผั:
- ะกะพะพะฑัะตะฝะธะต 1: ะธะทะฒะปะตะบะฐะตััั `phone: "ะตัะปะธ ะตััั ะฝะพะผะตั"` โ
- ะกะพะพะฑัะตะฝะธะต 2: ะฝะพะผะตั ะธะทะฒะปะตะบะฐะตััั, ะฝะพ ะฑะตะท ะบะพะฝัะตะบััะฐ ะบะพะผั ะฟัะธะฝะฐะดะปะตะถะธั

ะัะธ ะพะฑัะฐะฑะพัะบะต ะฑะตัะตะดะพะน:
- LLM ะฒะธะดะธั ะพะฑะฐ ัะพะพะฑัะตะฝะธั ะธ ะฟะพะฝะธะผะฐะตั: ะฝะพะผะตั ะฟัะธะฝะฐะดะปะตะถะธั ะกะฐัะต โ

---

## ะะตัะตะฝะธะต: ะะฒััััะพะฒะฝะตะฒะฐั ะณััะฟะฟะธัะพะฒะบะฐ

### ะฃัะพะฒะตะฝั 1: Session (ัััะตััะฒัะตั)
- **Gap:** 4 ัะฐัะฐ (ะฝะฐัััะฐะธะฒะฐะตััั)
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะะพะณะธัะตัะบะฐั ัะตััะธั ะพะฑัะตะฝะธั
- **ะกััะฝะพััั:** `Interaction`

### ะฃัะพะฒะตะฝั 2: Conversation (ะฝะพะฒะพะต)
- **Gap:** 20-30 ะผะธะฝัั (ะฝะฐัััะฐะธะฒะฐะตััั)
- **ะะฐะทะฝะฐัะตะฝะธะต:** ะะธะฝะธ-ะฑะตัะตะดะฐ ะดะปั extraction
- **ะกััะฝะพััั:** ะะธัััะฐะปัะฝะฐั ะณััะฟะฟะธัะพะฒะบะฐ (ะฑะตะท ะพัะดะตะปัะฝะพะน ัะฐะฑะปะธัั)

```
Session (4h) โโฌโ Conversation 1 (30m) โโโ [msg1, msg2, msg3]
              โโ Conversation 2 (30m) โโโ [msg4, msg5]
              โโ Conversation 3 (30m) โโโ [msg6]
```

---

## ะััะธัะตะบัััะฝัะต ัะตัะตะฝะธั

### 1. ะัะฐะฝะธัั ะฑะตัะตะดั: Per-Chat

**ะะตัะตะฝะธะต:** ะะตัะตะดะฐ ะพะณัะฐะฝะธัะตะฝะฐ ะพะดะฝะธะผ ัะฐัะพะผ (Interaction)

**ะะฑะพัะฝะพะฒะฐะฝะธะต:**
- ะัะธะฒะฐัะฝัะต ะธ ะฟัะฑะปะธัะฝัะต ัะพะพะฑัะตะฝะธั ะธะผะตัั ัะฐะทะฝัะน ะบะพะฝัะตะบัั
- ะัะพัะต ัะตะฐะปะธะทะฐัะธั โ ะฝะต ะฝัะถะฝะพ ะผะตัะถะธัั Interactions
- ะงะตะปะพะฒะตะบ ะฝะฐะผะตัะตะฝะฝะพ ะฒัะฑะธัะฐะตั ะณะดะต ะฟะธัะฐัั

### 2. ะัะพัั-ัะฐั ะบะพะฝัะตะบัั

**ะัะพะฑะปะตะผะฐ:** ะกะพะพะฑัะตะฝะธั ะฒ ัะฐะทะฝัั ัะฐัะฐั ะผะพะณัั ะฑััั ัะฒัะทะฐะฝั ะบะพะฝัะตะบัััะฐะปัะฝะพ.

```
14:00 ะััะฟะฟะพะฒะพะน [ั, ะะฐะบะฐะทัะธะบ, ะกะฐัะฐ]: ะะฐะบะฐะทัะธะบ โ "ะะฐะบ ัะฐะผ ะณะพัะพะฒะฝะพััั?"
14:02 ะะธัะบะฐ [ั, ะกะฐัะฐ]: ะกะฐัะฐ โ "ะะพัะพะฒะพ ะฝะฐะฟะพะปะพะฒะธะฝั"
```

**ะะตัะตะฝะธะต:** ะัะธ extraction ะดะพะฑะฐะฒะปัะตะผ "ะบะพะฝัะตะบััะฝะพะต ะพะบะฝะพ" ะธะท ัะฒัะทะฐะฝะฝัั ัะฐัะพะฒ.

```typescript
// Extraction prompt structure
`ะะะกะะะ (ะปะธัะฝัะน ัะฐั ั ะกะฐัะตะน):
${conversationMessages}

ะกะะฏะะะะะซะ ะะะะขะะะกะข (ะดััะณะธะต ัะฐัั ั ะกะฐัะตะน ะทะฐ ะฟะพัะปะตะดะฝะธะต 30 ะผะธะฝ):
${crossChatContext}

ะะะะะกะขะะซะ ะคะะะขะซ ะ ะกะะจะ:
${entityFacts}
`
```

**ะะปะณะพัะธัะผ ะฟะพะปััะตะฝะธั ะบัะพัั-ัะฐั ะบะพะฝัะตะบััะฐ:**
1. ะะฟัะตะดะตะปัะตะผ ััะฐััะฝะธะบะพะฒ ัะตะบััะตะน ะฑะตัะตะดั
2. ะัะตะผ ัะพะพะฑัะตะฝะธั ะทะฐ ะฟะพัะปะตะดะฝะธะต N ะผะธะฝัั (ะฝะฐัััะฐะธะฒะฐะตััั, default 30)
3. ะะท ะดััะณะธั Interactions ะณะดะต ััะฐััะฒััั ัะต ะถะต ัััะฝะพััะธ
4. ะะพะฑะฐะฒะปัะตะผ ะบะฐะบ supplementary context ะฒ prompt

### 3. ะะพะฝัะตะบัั ัััะฝะพััะธ

ะัะธ extraction ะฟะตัะตะดะฐัะผ ัััะตััะฒัััะธะต ะทะฝะฐะฝะธั ะพ ัััะฝะพััะธ:
- ะขะตะบััะธะต ัะฐะบัั (ะดะพะปะถะฝะพััั, ะบะพะผะฟะฐะฝะธั, etc.)
- ะััะพัะธั ัะฐะบัะพะฒ (ะตัะปะธ ัะตะปะตะฒะฐะฝัะฝะฐ)
- ะกะฒัะทะธ ั ะดััะณะธะผะธ ัััะฝะพัััะผะธ

ะญัะพ ะฟะพะผะพะณะฐะตั LLM ะฟัะฐะฒะธะปัะฝะพ ะฐััะธะฑััะธัะพะฒะฐัั ะธ ะธะฝัะตัะฟัะตัะธัะพะฒะฐัั ัะฐะบัั.

### 4. ะขัะธะณะณะตั extraction

**ะะตัะฐะฝะธะทะผ:** BullMQ delayed jobs

```
ะะพะฒะพะต ัะพะพะฑัะตะฝะธะต โ ะัะผะตะฝะธัั ะฟัะตะดัะดััะธะน delayed job โ ะกะพะทะดะฐัั ะฝะพะฒัะน (delay=30min)
                                                            โ
                                            Job ััะฐะฑะฐััะฒะฐะตั โ ะะตัะตะดะฐ "ะทะฐะบัััะฐ"
                                                            โ
                                                    Extraction ะทะฐะฟััะบะฐะตััั
```

**ะัะตะธะผััะตััะฒะฐ:**
- ะะธะฝะธะผัะผ "ะทะฐััััะฒัะธั" ะฑะตัะตะด
- ะัะพะผะฐัะฝัะต ะพะฟะตัะฐัะธะธ ัะตัะตะท BullMQ API
- ะฃะถะต ัะฐััะธัะฝะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ ะดะปั 4h sessions

---

## ะัะตัะฐัะธะธ ัะตะฐะปะธะทะฐัะธะธ

### ะัะตัะฐัะธั 1: ะะฐะทะพะฒะฐั ะณััะฟะฟะธัะพะฒะบะฐ (MVP)

1. ะะพะฑะฐะฒะธัั ะฝะฐัััะพะนะบั `extraction.conversationGapMinutes` (default: 30)
2. ะะพะดะธัะธัะธัะพะฒะฐัั `JobService` ะดะปั ะณััะฟะฟะธัะพะฒะบะธ messages ะฒ conversations
3. ะกะพะทะดะฐัั `extractFromConversation()` ะฒะผะตััะพ `extractFromMessage()`
4. ะะตัะตะดะฐะฒะฐัั entity context ะฒ extraction prompt
5. Unit/Integration ัะตััั

### ะัะตัะฐัะธั 2: ะัะพัั-ัะฐั ะบะพะฝัะตะบัั

1. ะะตะฐะปะธะทะพะฒะฐัั `getCrossChatContext(entityIds, timeWindow)`
2. ะะพะฑะฐะฒะธัั ะฒ extraction prompt
3. ะะฐัััะพะนะบะฐ ัะฐะทะผะตัะฐ ะพะบะฝะฐ

### ะัะตัะฐัะธั 3: ะขะตะผะฐัะธัะตัะบะพะต ัะฐะทะฑะธะตะฝะธะต (Post-MVP)

1. Pre-processing agent ะดะปั ัะฐะทะฑะธะตะฝะธั ะฑะพะปััะพะน ะฑะตัะตะดั ะฟะพ ัะตะผะฐะผ
2. ะะฐัะฐะปะปะตะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ัะตะผะฐัะธัะตัะบะธั ัะตะณะผะตะฝัะพะฒ
3. ะะณัะตะณะฐัะธั ัะตะทัะปััะฐัะพะฒ

---

## ะกัััะบัััะฐ ะดะฐะฝะฝัั

### ะะพะฒัะต ะฝะฐัััะพะนะบะธ

```typescript
// settings.service.ts
{
  key: 'extraction.conversationGapMinutes',
  value: 30,
  description: 'ะะพัะพะณ ัะฐะทะดะตะปะตะฝะธั ะฑะตัะตะด ะฒ ะผะธะฝััะฐั ะดะปั extraction',
  category: 'extraction',
}

{
  key: 'extraction.crossChatContextMinutes',
  value: 30,
  description: 'ะะบะฝะพ ะดะปั ะฟะพะธัะบะฐ ะบัะพัั-ัะฐั ะบะพะฝัะตะบััะฐ',
  category: 'extraction',
}
```

### ExtractionJobData (ัะฐััะธัะตะฝะธะต)

```typescript
interface ConversationGroup {
  messages: MessageData[];
  startedAt: Date;
  endedAt: Date;
  participantEntityIds: string[];
}

interface ExtractionJobData {
  interactionId: string;
  entityId: string;
  // ะะพะฒะพะต: ะณััะฟะฟะธัะพะฒะบะฐ ะฟะพ ะฑะตัะตะดะฐะผ
  conversations: ConversationGroup[];
  // Legacy: ะดะปั ะพะฑัะฐัะฝะพะน ัะพะฒะผะตััะธะผะพััะธ
  messages?: MessageData[];
}
```

---

## Prompt Structure (Draft)

```
ะขะะ ะงะะขะ: ${chatType} "${chatName}"
ะฃะงะะกะขะะะะ: ${participants}
ะะะขะ: ${today}

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ะะะะะกะขะะซะ ะคะะะขะซ ะ ะกะะะะกะะะะะะ (${entityName}):
${entityFacts || 'ะะตั ัะพััะฐะฝัะฝะฝัั ัะฐะบัะพะฒ'}
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะกะะฏะะะะะซะ ะะะะขะะะกะข (ะดััะณะธะต ัะฐัั ะทะฐ ะฟะพัะปะตะดะฝะธะต ${contextWindow} ะผะธะฝ):
${crossChatContext || 'ะะตั ัะฒัะทะฐะฝะฝะพะณะพ ะบะพะฝัะตะบััะฐ'}

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ะะะกะะะ:
${formattedConversation}
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะัะพะฐะฝะฐะปะธะทะธััะน ะะะกะะะฃ ะฆะะะะะะ ะธ ะธะทะฒะปะตะบะธ ัะฐะบัั/ัะพะฑััะธั.
ะัะฟะพะปัะทัะน ัะฒัะทะฐะฝะฝัะน ะบะพะฝัะตะบัั ะดะปั ะฟะพะฝะธะผะฐะฝะธั ะพัััะปะพะบ.
...
```

---

## Subject Resolution (ะะฟัะตะดะตะปะตะฝะธะต ััะฑัะตะบัะฐ ัะฐะบัะฐ)

### ะัะพะฑะปะตะผะฐ

ะคะฐะบั ะผะพะถะตั ะพัะฝะพัะธัััั ะะ ะบ ะฐะฒัะพัั ัะพะพะฑัะตะฝะธั:

```
ะะฐัะธะฝะฐ: "ะฃ ะะณะพัั ะดะตะฝั ัะพะถะดะตะฝะธั 10 ะฐะฒะณัััะฐ"
```

ะคะฐะบั `birthday: "10 ะฐะฒะณัััะฐ"` ะพัะฝะพัะธััั ะบ ะะณะพัั, ะฝะต ะบ ะะฐัะธะฝะต.

### ะะตัะตะฝะธะต: ะะฒััััะฐะฟะฝะพะต ะธะทะฒะปะตัะตะฝะธะต

**ะญัะฐะฟ 1: Extraction ั ัะฟะพะผะธะฝะฐะฝะธะตะผ ััะฑัะตะบัะฐ**

LLM ะธะทะฒะปะตะบะฐะตั ัะฐะบั ั ัะบะฐะทะฐะฝะธะตะผ ััะฑัะตะบัะฐ ะฒ ัะตะบััะต:
```json
{
  "factType": "birthday",
  "value": "10 ะฐะฒะณัััะฐ",
  "subjectMention": "ะะณะพัั",
  "confidence": 0.9
}
```

**ะญัะฐะฟ 2: Entity Resolution ะดะปั ััะฑัะตะบัะฐ**

| subjectMention | ะะตะทัะปััะฐั | ะะตะนััะฒะธะต |
|----------------|-----------|----------|
| ะะฐะนะดะตะฝ ัะพัะฝะพ (1 match) | `entityId: "xxx"` | ะัะธะฒัะทะฐัั ัะฐะบั |
| ะะฐะนะดะตะฝะพ ะฝะตัะบะพะปัะบะพ | `candidates: [...]` | ะะฐะฟัะพัะธัั ะฟะพะดัะฒะตัะถะดะตะฝะธะต |
| ะะต ะฝะฐะนะดะตะฝ | `null` | ะกะพะทะดะฐัั pending ะธะปะธ ะพัะปะพะถะธัั |
| ะะฒัะพั ัะพะพะฑัะตะฝะธั | ะขะตะบััะฐั entity | ะัะธะฒัะทะฐัั ัะฐะบั |

### ะะฐััะธัะฐ ัะตัะตะฝะธะน

| ะฃะฒะตัะตะฝะฝะพััั | Entity ะฝะฐะนะดะตะฝะฐ | ะะตะนััะฒะธะต |
|-------------|----------------|----------|
| โฅ 0.8 | ะะฐ (1 match) | ะะฒัะพ-ัะพะทะดะฐัั ัะฐะบั |
| โฅ 0.8 | ะะตัะบะพะปัะบะพ | ะะพะดัะฒะตัะถะดะตะฝะธะต: "ะ ะบะพะผ?" |
| < 0.8 | ะะฐ | ะะพะดัะฒะตัะถะดะตะฝะธะต: "ะะตัะฝะพ?" |
| < 0.8 | ะะตั | ะัะปะพะถะธัั ะธะปะธ ะพัะฑัะพัะธัั |

---

## ะะดะธะฝัะน ัะปะพั ะฟะพะดัะฒะตัะถะดะตะฝะธะน

### ะะพัะธะฒะฐัะธั

ะะผะตััะพ ะฝะตัะบะพะปัะบะธั ะพัะดะตะปัะฝัั ะผะตัะฐะฝะธะทะผะพะฒ (PendingEntityResolution, PendingFact, etc.) โ ะตะดะธะฝะฐั ัะธััะตะผะฐ ะฟะพะดัะฒะตัะถะดะตะฝะธะน.

### ะขะธะฟั ะฟะพะดัะฒะตัะถะดะตะฝะธะน

| Type | ะขัะธะณะณะตั | ะะฒัะพะผะฐัะธะทะฐัะธั |
|------|---------|---------------|
| `identifier_attribution` | ะะพะผะตั/email **ะฒ ัะตะบััะต** ัะพะพะฑัะตะฝะธั | ะกะฟัะพัะธัั: "ะ ะบะพะผั ะพัะฝะพัะธััั?" |
| `entity_merge` | ะะพัะพะถะธะต identifiers ั ัะฐะทะฝัั entities | ะกะฟัะพัะธัั: "ะะฑัะตะดะธะฝะธัั?" |
| `fact_subject` | ะคะฐะบั ะพ ััะตััะตะผ ะปะธัะต | ะกะฟัะพัะธัั: "ะ ะบะพะผ ัะฐะบั?" |
| `fact_value` | ะะธะทะบะฐั ัะฒะตัะตะฝะฝะพััั | ะกะฟัะพัะธัั: "ะะตัะฝะพ?" |

**ะะฐะถะฝะพ:** ะะพะฒัะน `telegram_id` ะฟัะธ ะฟะตัะฒะพะผ ัะพะพะฑัะตะฝะธะธ โ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัะผ entity, ะะ ัะฟัะฐัะธะฒะฐะตะผ.

### Entity: PendingConfirmation

```typescript
@Entity('pending_confirmations')
export class PendingConfirmation {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column({ length: 50 })
  type: 'identifier_attribution' | 'entity_merge' | 'fact_subject' | 'fact_value';

  @Column({ type: 'jsonb' })
  context: {
    title: string;           // "ะ ะบะพะผ ัะฐะบั?"
    description: string;     // ะะฟะธัะฐะฝะธะต ัะธััะฐัะธะธ
    sourceQuote?: string;    // ะฆะธัะฐัะฐ ะธะท ัะพะพะฑัะตะฝะธั
  };

  @Column({ type: 'jsonb' })
  options: Array<{
    id: string;
    label: string;           // "ะะณะพัั ะกะธะดะพัะพะฒ"
    sublabel?: string;       // "ะะพะปะปะตะณะฐ ะธะท ะกะฑะตัะฐ"
    entityId?: string;
    isCreateNew?: boolean;
    isDecline?: boolean;
    isOther?: boolean;
  }>;

  @Column({ type: 'decimal', precision: 3, scale: 2, nullable: true })
  confidence: number;

  @Column({ length: 20, default: 'pending' })
  status: 'pending' | 'confirmed' | 'declined' | 'expired';

  // ะกะฒัะทะธ
  @Column({ type: 'uuid', nullable: true })
  sourceMessageId: string | null;

  @Column({ type: 'uuid', nullable: true })
  sourcePendingFactId: string | null;

  // ะะตะทัะปััะฐั
  @Column({ type: 'uuid', nullable: true })
  selectedOptionId: string | null;

  @Column({ type: 'timestamp', nullable: true })
  resolvedAt: Date | null;

  @Column({ length: 20, nullable: true })
  resolvedBy: 'user' | 'auto' | 'expired' | null;

  @CreateDateColumn()
  createdAt: Date;

  @Column({ type: 'timestamp', nullable: true })
  expiresAt: Date | null;
}
```

### ConfirmationService

```typescript
@Injectable()
export class ConfirmationService {
  // ะกะพะทะดะฐะฝะธะต
  async create(dto: CreateConfirmationDto): Promise<PendingConfirmation>;

  // ะะฑัะฐะฑะพัะบะฐ ะพัะฒะตัะฐ (+ dispatch ะบ type-specific handler)
  async resolve(id: string, optionId: string): Promise<void>;

  // ะะปั Telegram UI
  async getPendingForUser(limit?: number): Promise<PendingConfirmation[]>;
}
```

### Telegram UI โ ะะดะธะฝัะน ัะพัะผะฐั

```
โ **ะ ะบะพะผ ัะฐะบั?**

ะคะฐะบั "ะดะตะฝั ัะพะถะดะตะฝะธั: 10 ะฐะฒะณัััะฐ" ะธะท ัะพะพะฑัะตะฝะธั ะะฐัะธะฝั.

> "ะฃ ะะณะพัั ะดะตะฝั ัะพะถะดะตะฝะธั 10 ะฐะฒะณัััะฐ"

[ะะณะพัั ะกะธะดะพัะพะฒ] [ะะฐัะธะฝะฐ ะะตััะพะฒะฐ]
[โ๏ธ ะััะณะพะน...] [โ ะัะบะปะพะฝะธัั]
```

### ะััะธัะตะบัััะฐ

```
                    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                    โ     PendingConfirmation         โ
                    โ  (unified entity + service)     โ
                    โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
                                    โ
           โโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ                        โ                        โ
           โผ                        โผ                        โผ
โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ
โ IdentifierAttrib โ    โ   FactSubject    โ    โ   EntityMerge    โ
โ     Handler      โ    โ     Handler      โ    โ     Handler      โ
โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ
```

---

## ะัะบััััะต ะฒะพะฟัะพัั

1. **ะะฐะทะผะตั ะฑะตัะตะดั:** ะงัะพ ะดะตะปะฐัั ะตัะปะธ ะฑะตัะตะดะฐ ะพัะตะฝั ะฑะพะปััะฐั (100+ ัะพะพะฑัะตะฝะธะน)?
   - ะะฐัะธะฐะฝั A: Truncate ั ะฟัะธะพัะธัะตัะพะผ ะฝะตะดะฐะฒะฝะธั
   - ะะฐัะธะฐะฝั B: ะัะตัะฐัะธั 3 โ ัะตะผะฐัะธัะตัะบะพะต ัะฐะทะฑะธะตะฝะธะต

2. **ะัะธะพัะธัะตั ะบะพะฝัะตะบััะพะฒ:** ะัะปะธ ะบัะพัั-ัะฐั ะบะพะฝัะตะบัั ะบะพะฝัะปะธะบััะตั ั entity facts?
   - ะัะตะดะปะพะถะตะฝะธะต: Entity facts ะบะฐะบ baseline, ะบัะพัั-ัะฐั ะบะฐะบ ัะฒะตะถะธะน ะบะพะฝัะตะบัั

---

## ะกะฒัะทะฐะฝะฝัะต ะดะพะบัะผะตะฝัั

- [Context-Aware Extraction Plan](./enchanted-spinning-dream.md) โ ะฟัะตะดัะดััะธะน ะฟะปะฐะฝ (ัะฐััะธัะฝะพ ัะตะฐะปะธะทะพะฒะฐะฝ)
- [Second Brain INDEX](../second-brain/INDEX.md) โ ะพะฑัะธะน roadmap
- [CLAUDE.md](../../CLAUDE.md) โ ะฟัะฐะฒะธะปะฐ ะฟัะพะตะบัะฐ
